<app-sidebar></app-sidebar>
<app-navbar></app-navbar>

<div class="content-container">
  <div class="container mt-3">
    <h2><i class="fas fa-calendar-check"></i> Doctor Appointment Scheduling</h2>

    <!-- Select Doctor -->
    <label for="doctor">Select Doctor:</label>
    <select id="doctor" class="form-control" (change)="loadSchedule($event)">
      <option value="">-- Select a Doctor --</option>
      <option *ngFor="let doctor of doctors" [value]="doctor.id">
        {{ doctor.name }}
      </option>
    </select>

    <!-- Select Patient -->
    <label for="patient" class="mt-2">Select Patient:</label>
    <select id="patient" class="form-control" [(ngModel)]="selectedPatientId">
      <option value="">-- Select a Patient --</option>
      <option *ngFor="let patient of patients" [value]="patient.id">
        {{ patient.name }}
      </option>
    </select>

    <!-- Select Date -->
    <label class="mt-2">Select Date:</label>
    <input type="date" class="form-control" [(ngModel)]="appointmentDate">

    <!-- Select Time -->
    <label class="mt-2">Schedule Time:</label>
    <input type="time" class="form-control" [(ngModel)]="newSlot">

    <!-- Appointment Type -->
    <label class="mt-2">Appointment Type:</label>
    <select class="form-control" [(ngModel)]="appointmentType">
      <option value="">-- Select Appointment Type --</option>
      <option *ngFor="let type of appointmentTypes" [value]="type">
        {{ type }}
      </option>
    </select>

    <!-- Notes -->
    <label class="mt-2">Notes:</label>
    <textarea class="form-control" [(ngModel)]="notes"></textarea>

    <!-- Buttons for Creating and Rescheduling Appointment -->
    <div class="mt-3">
      <button *ngIf="!appointmentId" class="btn btn-success" (click)="createSchedule()">Create Schedule</button>

      <button *ngIf="appointmentId" class="btn btn-warning" (click)="rescheduleAppointment()">Reschedule Appointment</button>
    </div>
  </div>
</div>
